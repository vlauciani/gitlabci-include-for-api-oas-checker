api-oas-checker:
  extends: .dind2
  variables:
    INCLUDE_OPENAPI_DIR: "default"
    INCLUDE_OPENAPI_FILENAME: "default"
  script:
    - echo "INCLUDE_OPENAPI_DIR=${INCLUDE_OPENAPI_DIR}"
    - echo "INCLUDE_OPENAPI_FILENAME=${INCLUDE_OPENAPI_FILENAME}"
    - echo "FULL=$(pwd)/${INCLUDE_OPENAPI_DIR}"
    - ls -l $(pwd)/${INCLUDE_OPENAPI_DIR}
    - docker run --rm --entrypoint=sh -v $(pwd)/${INCLUDE_OPENAPI_DIR}:/tmp stoplight/spectral:5.9.1 -c "spectral lint -r https://italia.github.io/api-oas-checker/spectral.yml /tmp/${INCLUDE_OPENAPI_FILENAME}"
  #after_script:
  #  - docker images    

.dind2:
  image: 
    name: docker:19.03.2
    #entrypoint: [""]
  services:
    - docker:19.03.2-dind 
